# 日本感染症サーベイランスデータ分析

日本の感染症発生動向調査データを収集・分析するプロジェクトです。

## データソース

本プロジェクトで使用しているデータは、国立健康危機管理研究機構 感染症情報提供サイトから取得しています。

**出典**: 国立健康危機管理研究機構 感染症情報提供サイト  
https://id-info.jihs.go.jp/surveillance/idwr/

データの利用については `DATA_LICENSE.md` および原サイトの利用規約をご確認ください。

## データセット

### 1. Zensu (総数)
全国の感染症報告総数データ
- 期間: 2023年第1週〜2025年第11週
- ファイル数: 115週分
- 形式: 都道府県別・疾病別報告数

### 2. Teiten (定点)
定点医療機関からの報告データ
- 期間: 2023年第1週〜2025年第46週  
- ファイル数: 150週分
- 形式: 都道府県別・疾病別（報告数・定点当たり報告数）
- 主要疾病:
  - インフルエンザ
  - COVID-19
  - RSウイルス感染症
  - 咽頭結膜熱
  - 感染性胃腸炎
  - その他小児感染症等

### 3. ARI (急性呼吸器感染症)
急性呼吸器感染症の報告データ
- 期間: 2025年第15週〜
- ファイル数: 17週分
- 形式: 都道府県別報告数・定点当たり報告数

### 4. Trend (過去10年間トレンド)
過去10年間の定点当たり報告数の推移データ
- 期間: 2023年第1週〜2025年第46週（各報告週時点）
- ファイル数: 150週分
- 形式: 宽表形式（年×週）
- 含む疾病: インフルエンザ、COVID-19、咽頭結膜熱等

## セットアップ

### 必要な環境
- Python 3.14+
- uv (推奨) または pip

### インストール

```bash
# uvを使用する場合
uv sync
```

## 使用方法

### データのダウンロードと処理

```bash
# すべてのデータタイプをダウンロード・処理・統合
uv run main.py

# 特定のデータタイプのみダウンロード
uv run main.py download zensu
uv run main.py download teiten
uv run main.py download ari
uv run main.py download trend

# 既存データの統合のみ
uv run main.py merge zensu
uv run main.py merge teiten
```

## ディレクトリ構造

```
.
├── main.py                 # データダウンロード・処理スクリプト
├── plot_influenza.py       # 可視化スクリプト
├── README.md              # 本ファイル
├── DATA_LICENSE.md        # データライセンス情報
├── 利用規約.txt            # 原サイトの利用規約（参考）
└── data/                  # データディレクトリ
    ├── zensu/
    │   ├── raw/           # 原始データ
    │   ├── processed/     # 処理済みデータ
    │   └── merged_zensu.csv
    ├── teiten/
    │   ├── raw/
    │   ├── processed/
    │   └── merged_teiten.csv
    ├── ari/
    │   ├── raw/
    │   ├── processed/
    │   └── merged_ari.csv
    └── trend/
        ├── raw/
        └── processed/
```

## データ処理の詳細

### 文字エンコーディング
- 原始データ: Shift-JIS
- 処理済みデータ: UTF-8

### データクリーニング
1. 多行ヘッダーの解析と整形
2. 年・週情報の追加
3. ISO週に基づく日付情報の計算（開始日・終了日・月）
4. 疾病名と報告タイプの組み合わせによる列名生成

### Trendデータの特殊処理
- 宽表形式を維持（報告年、報告週、疾病、年、1週〜52週）
- 各報告週時点での過去10年間のデータを含む

## ライセンス

### データライセンス
本プロジェクトで使用するデータは国立健康危機管理研究機構から提供されています。  
詳細は `DATA_LICENSE.md` をご確認ください。

### コードライセンス
MIT License（プロジェクトコード部分）

## 注意事項

1. データは速報値であり、後日修正される可能性があります
2. 2025年以降、一部データタイプでURLパスが変更されています（`/rapid/` → `/jp/rapid/`）
3. データの解釈や利用については、原サイトの情報も併せてご確認ください

## 貢献

IssueやPull Requestを歓迎します。

## お問い合わせ

データの内容や利用方法については、国立健康危機管理研究機構にお問い合わせください。  
プロジェクトの技術的な質問については、GitHubのIssueをご利用ください。